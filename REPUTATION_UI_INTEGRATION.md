# ğŸ† Provider Reputation System - UI é›†æˆå®ŒæˆæŠ¥å‘Š

## âœ… å®Œæˆçš„å·¥ä½œ

### 1. äº§å“è¯¦æƒ…é¡µ - Provider ä¿¡èª‰æ˜¾ç¤º

**æ–‡ä»¶**: `app/products/[id]/page.tsx`

**æ–°å¢åŠŸèƒ½**:
- âœ… æ˜¾ç¤º Provider ä¿¡èª‰åˆ†æ•°ï¼ˆ0-100ï¼‰
- âœ… æ˜¾ç¤ºå¹³å‡è¯„åˆ†å’Œè¯„åˆ†æ•°é‡ï¼ˆâ­ 4.8 (25 ratings)ï¼‰
- âœ… æ˜¾ç¤º Provider å¾½ç« ï¼ˆâœ… Verified, ğŸ† Top Seller, ğŸŒŸ Trusted, ğŸ’ High Quality, ğŸ”’ Reliableï¼‰

**æ•ˆæœ**:
```
Provider
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [AB] Wallet Address                     â”‚
â”‚      8x7y...9z2w                        â”‚
â”‚                                         â”‚
â”‚      85/100  â­ 4.8 (25 ratings)        â”‚
â”‚      âœ… Verified  ğŸ† Top Seller         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. è´­ä¹°å†å²é¡µ - è¯„åˆ†åŠŸèƒ½

**æ–‡ä»¶**: `app/dashboard/purchases/page.tsx`

**æ–°å¢åŠŸèƒ½**:
- âœ… "Rate Provider" æŒ‰é’®ï¼ˆä»…å¯¹æœªè¯„åˆ†çš„è®¢å•æ˜¾ç¤ºï¼‰
- âœ… è¯„åˆ†å¯¹è¯æ¡†ï¼ˆ5 æ˜Ÿè¯„åˆ† + å¯é€‰è¯„è®ºï¼‰
- âœ… æ˜¾ç¤ºå·²æäº¤çš„è¯„åˆ†
- âœ… è°ƒç”¨ `/api/ratings` æäº¤è¯„åˆ†

**æ•ˆæœ**:
```
Purchase Card
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dataset Name                            â”‚
â”‚ Provider: 8x7y...9z2w                   â”‚
â”‚                                         â”‚
â”‚ Your Rating: â­â­â­â­â­                  â”‚
â”‚ "Excellent data quality!"               â”‚
â”‚                                         â”‚
â”‚ [Download] [View Product] [Rate]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¯„åˆ†å¯¹è¯æ¡†**:
```
Rate Provider
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dataset Name                            â”‚
â”‚ Provider: 8x7y...9z2w                   â”‚
â”‚                                         â”‚
â”‚ Rating:                                 â”‚
â”‚ â­â­â­â­â­  5/5                          â”‚
â”‚                                         â”‚
â”‚ Comment (Optional):                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Share your experience...            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚         [Cancel]  [Submit Rating]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. Marketplace - ä¿¡èª‰å¾½ç« æ˜¾ç¤º

**æ–‡ä»¶**: `app/marketplace/page.tsx`

**æ–°å¢åŠŸèƒ½**:
- âœ… åœ¨äº§å“å¡ç‰‡ä¸Šæ˜¾ç¤º Provider ä¿¡èª‰åˆ†æ•°
- âœ… æ˜¾ç¤ºå¹³å‡è¯„åˆ†ï¼ˆâ­ 4.8ï¼‰
- âœ… æ˜¾ç¤ºå‰ 3 ä¸ªå¾½ç« å›¾æ ‡ï¼ˆâœ…ğŸ†ğŸŒŸï¼‰

**æ•ˆæœ**:
```
Product Card
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Category] [CSV] [ğŸ”’ Encrypted]         â”‚
â”‚                                         â”‚
â”‚ Dataset Name                            â”‚
â”‚ Description...                          â”‚
â”‚                                         â”‚
â”‚ Price:      $0.10 USDC                  â”‚
â”‚ Size:       1.2 MB                      â”‚
â”‚ Provider:   8x7y...9z2w                 â”‚
â”‚ Reputation: 85  â­ 4.8                  â”‚
â”‚             âœ…ğŸ†ğŸŒŸ                       â”‚
â”‚                                         â”‚
â”‚ ğŸ‘ï¸ 150    ğŸ›’ 25                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. API æ›´æ–°

#### `app/api/products/[id]/route.ts`
- âœ… æ·»åŠ  `providerReputation` åˆ° provider æŸ¥è¯¢
- âœ… åŒ…å« `reputationScore`, `averageRating`, `totalRatings`, `badges`

#### `app/api/products/route.ts`
- âœ… æ·»åŠ  `providerReputation` åˆ° provider æŸ¥è¯¢
- âœ… ä¿®å¤æœç´¢é€»è¾‘ï¼ˆä½¿ç”¨ `AND` + `OR` é¿å…æ¡ä»¶å†²çªï¼‰
- âœ… ä¿®å¤ category è¿‡æ»¤ï¼ˆæ”¯æŒ `'All Categories'`ï¼‰

#### `app/api/orders/route.ts`
- âœ… æ·»åŠ  `rating` å…³è”æŸ¥è¯¢
- âœ… æ·»åŠ  `providerId` åˆ° product æŸ¥è¯¢
- âœ… åŒ…å« `rating.id`, `rating.rating`, `rating.comment`

---

## ğŸ”§ ä¿®å¤çš„é—®é¢˜

### é—®é¢˜ 1: Reputation System æ²¡æœ‰åœ¨ UI ä¸­ä½¿ç”¨

**åŸå› **: 
- åç«¯é€»è¾‘å®Œæ•´ï¼Œä½†å‰ç«¯æ²¡æœ‰é›†æˆ
- API æ²¡æœ‰è¿”å› reputation æ•°æ®
- æ²¡æœ‰è¯„åˆ†æäº¤å…¥å£

**è§£å†³æ–¹æ¡ˆ**:
- âœ… åœ¨äº§å“è¯¦æƒ…é¡µæ˜¾ç¤º provider ä¿¡èª‰
- âœ… åœ¨è´­ä¹°å†å²é¡µæ·»åŠ è¯„åˆ†åŠŸèƒ½
- âœ… åœ¨ Marketplace æ˜¾ç¤ºä¿¡èª‰å¾½ç« 
- âœ… æ›´æ–°æ‰€æœ‰ç›¸å…³ API è¿”å› reputation æ•°æ®

---

### é—®é¢˜ 2: Marketplace æœç´¢ä¸èµ·ä½œç”¨

**åŸå› **:
- ä½¿ç”¨ `where.OR` ä¼šè¦†ç›–å…¶ä»–æ¡ä»¶ï¼ˆå¦‚ `category`ï¼‰
- æ²¡æœ‰å¤„ç† `'All Categories'` å­—ç¬¦ä¸²

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ä¿®å¤å‰
if (search) {
  where.OR = [
    { name: { contains: search, mode: 'insensitive' } },
    { description: { contains: search, mode: 'insensitive' } },
  ]
}

// ä¿®å¤å
if (search) {
  where.AND = [
    {
      OR: [
        { name: { contains: search, mode: 'insensitive' } },
        { description: { contains: search, mode: 'insensitive' } },
      ],
    },
  ]
}

// Category è¿‡æ»¤
if (category && category !== 'all' && category !== 'All Categories') {
  where.category = category
}
```

---

## ğŸ“Š å®Œæ•´çš„ Reputation System å·¥ä½œæµç¨‹

### 1. ç”¨æˆ·è´­ä¹°æ•°æ®é›†
```
ç”¨æˆ·æ”¯ä»˜ 0.1 USDC
    â†“
åˆ›å»º Order (status: 'completed')
    â†“
Provider ä¿¡èª‰æ›´æ–°ï¼ˆé”€å”®æ•° +1ï¼‰
```

### 2. ç”¨æˆ·æäº¤è¯„åˆ†
```
ç”¨æˆ·è®¿é—® "My Purchases"
    â†“
ç‚¹å‡» "Rate Provider" æŒ‰é’®
    â†“
å¡«å†™è¯„åˆ†ï¼ˆ1-5 æ˜Ÿï¼‰+ å¯é€‰è¯„è®º
    â†“
æäº¤åˆ° POST /api/ratings
    â†“
åˆ›å»º ProviderRating è®°å½•
    â†“
è‡ªåŠ¨æ›´æ–° Provider ä¿¡èª‰åˆ†æ•°
    â†“
åŒæ­¥åˆ° Irys + Solana (åå°)
```

### 3. å…¶ä»–ç”¨æˆ·æŸ¥çœ‹ä¿¡èª‰
```
ç”¨æˆ·æµè§ˆ Marketplace
    â†“
çœ‹åˆ°äº§å“å¡ç‰‡ä¸Šçš„ä¿¡èª‰åˆ†æ•°å’Œå¾½ç« 
    â†“
ç‚¹å‡»äº§å“è¯¦æƒ…
    â†“
çœ‹åˆ°å®Œæ•´çš„ Provider ä¿¡èª‰ä¿¡æ¯
    â†“
åŸºäºä¿¡èª‰åšå‡ºè´­ä¹°å†³ç­–
```

---

## ğŸ¯ ä¿¡èª‰åˆ†æ•°è®¡ç®—å…¬å¼

```
ä¿¡èª‰åˆ†æ•° = 50ï¼ˆåŸºç¡€åˆ†ï¼‰
         + (å¹³å‡è¯„åˆ† - 3) Ã— 10ï¼ˆæœ€é«˜ +20ï¼‰
         + min(é”€å”®æ•° / 10, 20)ï¼ˆæœ€é«˜ +20ï¼‰
         - äº‰è®®ç‡ Ã— 100ï¼ˆæœ€é«˜ -30ï¼‰
         - é€€æ¬¾ç‡ Ã— 100ï¼ˆæœ€é«˜ -20ï¼‰

èŒƒå›´: 0-100
```

---

## ğŸ… å¾½ç« ç³»ç»Ÿ

| å¾½ç«  | æ¡ä»¶ | å›¾æ ‡ |
|------|------|------|
| **Verified** | ä¿¡èª‰åˆ†æ•° â‰¥ 80 | âœ… |
| **Top Seller** | æ€»é”€å”® â‰¥ 100 | ğŸ† |
| **Trusted** | å¹³å‡è¯„åˆ† â‰¥ 4.5 ä¸”è¯„åˆ†æ•° â‰¥ 10 | ğŸŒŸ |
| **High Quality** | äº‰è®®ç‡ < 5% ä¸”é”€å”® â‰¥ 20 | ğŸ’ |
| **Reliable** | é€€æ¬¾ç‡ < 3% ä¸”é”€å”® â‰¥ 20 | ğŸ”’ |

---

## ğŸ” é˜²ä½œå¼Šæœºåˆ¶

è¯„åˆ†æäº¤æ—¶çš„ 6 é‡éªŒè¯ï¼š

1. âœ… è¯„åˆ†èŒƒå›´å¿…é¡»æ˜¯ 1-5
2. âœ… è®¢å•å¿…é¡»å­˜åœ¨ä¸”å·²å®Œæˆ
3. âœ… æä¾›è€…å¿…é¡»åŒ¹é…
4. âœ… æ¯ä¸ªè®¢å•åªèƒ½è¯„åˆ†ä¸€æ¬¡
5. âœ… é€€æ¬¾åä¸èƒ½è¯„åˆ†
6. âœ… äº‰è®®æœŸé—´ä¸èƒ½è¯„åˆ†

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

### å‰ç«¯ç»„ä»¶
- `app/products/[id]/page.tsx` - äº§å“è¯¦æƒ…é¡µï¼ˆä¿¡èª‰æ˜¾ç¤ºï¼‰
- `app/dashboard/purchases/page.tsx` - è´­ä¹°å†å²é¡µï¼ˆè¯„åˆ†åŠŸèƒ½ï¼‰
- `app/marketplace/page.tsx` - Marketplaceï¼ˆä¿¡èª‰å¾½ç« ï¼‰

### API ç«¯ç‚¹
- `app/api/products/[id]/route.ts` - äº§å“è¯¦æƒ… API
- `app/api/products/route.ts` - äº§å“åˆ—è¡¨ API
- `app/api/orders/route.ts` - è®¢å•åˆ—è¡¨ API
- `app/api/ratings/route.ts` - è¯„åˆ†æäº¤ API
- `app/api/providers/[id]/reputation/route.ts` - ä¿¡èª‰æŸ¥è¯¢ API

### æ ¸å¿ƒé€»è¾‘
- `lib/reputation.ts` - ä¿¡èª‰è®¡ç®—å’Œæ›´æ–°é€»è¾‘
- `prisma/schema.prisma` - æ•°æ®åº“æ¨¡å‹

### æ–‡æ¡£
- `docs/02-architecture/REPUTATION_SYSTEM_LOGIC.md` - ä¿¡èª‰ç³»ç»Ÿé€»è¾‘è¯´æ˜
- `REPUTATION_UI_INTEGRATION.md` - æœ¬æ–‡æ¡£

---

## ğŸ”§ åˆå§‹åŒ– Reputation æ•°æ®

### æ–¹æ³• 1: è¿è¡Œåˆå§‹åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
npx tsx scripts/init-reputation.ts
```

è¿™ä¸ªè„šæœ¬ä¼šä¸ºæ‰€æœ‰ç°æœ‰ç”¨æˆ·åˆ›å»º `ProviderReputation` è®°å½•ã€‚

### æ–¹æ³• 2: æ‰‹åŠ¨åˆ›å»ºï¼ˆé€šè¿‡ Prisma Studioï¼‰

```bash
npx prisma studio
```

ç„¶ååœ¨ `ProviderReputation` è¡¨ä¸­ä¸ºæ¯ä¸ª provider åˆ›å»ºè®°å½•ã€‚

### æ–¹æ³• 3: è‡ªåŠ¨åˆ›å»ºï¼ˆé¦–æ¬¡è®¿é—®æ—¶ï¼‰

å½“ç”¨æˆ·é¦–æ¬¡è®¿é—®äº§å“è¯¦æƒ…é¡µæ—¶ï¼Œå¦‚æœ provider æ²¡æœ‰ reputation è®°å½•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé»˜è®¤è®°å½•ï¼ˆä¿¡èª‰åˆ†æ•° = 50ï¼‰ã€‚

**æ³¨æ„**: å¦‚æœçœ‹ä¸åˆ°ä¿¡èª‰æ•°æ®ï¼Œè¯·ç¡®ä¿ï¼š
1. æ•°æ®åº“ä¸­æœ‰ `ProviderReputation` è®°å½•
2. API æ­£ç¡®è¿”å› `providerReputation` å­—æ®µ
3. å‰ç«¯æ­£ç¡®å¤„ç† `providerReputation` å¯èƒ½ä¸º `null` çš„æƒ…å†µ

---

## âœ… æµ‹è¯•æ¸…å•

### äº§å“è¯¦æƒ…é¡µ
- [ ] è®¿é—®ä»»æ„äº§å“è¯¦æƒ…é¡µ
- [ ] ç¡®è®¤æ˜¾ç¤º Provider ä¿¡èª‰åˆ†æ•°
- [ ] ç¡®è®¤æ˜¾ç¤ºå¹³å‡è¯„åˆ†å’Œè¯„åˆ†æ•°é‡
- [ ] ç¡®è®¤æ˜¾ç¤ºå¾½ç« ï¼ˆå¦‚æœæœ‰ï¼‰

### è´­ä¹°å†å²é¡µ
- [ ] è®¿é—® "My Purchases" é¡µé¢
- [ ] ç¡®è®¤å·²è´­ä¹°çš„äº§å“æ˜¾ç¤º "Rate Provider" æŒ‰é’®
- [ ] ç‚¹å‡»æŒ‰é’®æ‰“å¼€è¯„åˆ†å¯¹è¯æ¡†
- [ ] æäº¤è¯„åˆ†ï¼ˆ1-5 æ˜Ÿ + å¯é€‰è¯„è®ºï¼‰
- [ ] ç¡®è®¤è¯„åˆ†æˆåŠŸæäº¤
- [ ] åˆ·æ–°é¡µé¢ï¼Œç¡®è®¤è¯„åˆ†æ˜¾ç¤º
- [ ] ç¡®è®¤ "Rate Provider" æŒ‰é’®æ¶ˆå¤±

### Marketplace
- [ ] è®¿é—® Marketplace
- [ ] ç¡®è®¤äº§å“å¡ç‰‡æ˜¾ç¤º Provider ä¿¡èª‰åˆ†æ•°
- [ ] ç¡®è®¤æ˜¾ç¤ºå¹³å‡è¯„åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] ç¡®è®¤æ˜¾ç¤ºå¾½ç« å›¾æ ‡ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] æµ‹è¯•æœç´¢åŠŸèƒ½ï¼ˆè¾“å…¥å…³é”®è¯ï¼‰
- [ ] æµ‹è¯•åˆ†ç±»è¿‡æ»¤
- [ ] æµ‹è¯•æœç´¢ + åˆ†ç±»ç»„åˆè¿‡æ»¤
- [ ] æµ‹è¯•ä»·æ ¼æ’åºï¼ˆåº”è¯¥æ˜¯ low to highï¼‰

---

## ğŸ‰ æ€»ç»“

**Provider Reputation System ç°å·²å®Œå…¨é›†æˆåˆ° UIï¼**

ç”¨æˆ·ç°åœ¨å¯ä»¥ï¼š
1. âœ… åœ¨ Marketplace çœ‹åˆ° Provider ä¿¡èª‰å¾½ç« 
2. âœ… åœ¨äº§å“è¯¦æƒ…é¡µçœ‹åˆ°å®Œæ•´çš„ä¿¡èª‰ä¿¡æ¯
3. âœ… åœ¨è´­ä¹°åæäº¤è¯„åˆ†
4. âœ… åŸºäºä¿¡èª‰åšå‡ºè´­ä¹°å†³ç­–

**ç³»ç»Ÿç‰¹æ€§**ï¼š
- ğŸ” 6 é‡é˜²ä½œå¼ŠéªŒè¯
- ğŸ“Š ç§‘å­¦çš„ä¿¡èª‰åˆ†æ•°è®¡ç®—
- ğŸ… 5 ç§å¾½ç« æ¿€åŠ±æœºåˆ¶
- â˜ï¸ é“¾ä¸ŠåŒæ­¥ï¼ˆIrys + Solanaï¼‰
- ğŸ”„ è‡ªåŠ¨æ›´æ–°ï¼ˆ4 ç§è§¦å‘äº‹ä»¶ï¼‰

**ä¸‹ä¸€æ­¥**ï¼š
1. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
2. åˆ›å»ºä¸€äº›æµ‹è¯•æ•°æ®ï¼ˆè´­ä¹° + è¯„åˆ†ï¼‰
3. éªŒè¯ä¿¡èª‰åˆ†æ•°è®¡ç®—æ­£ç¡®
4. å‡†å¤‡ Hackathon æ¼”ç¤º

---

**æ‰€æœ‰ä¿®å¤å·²å®Œæˆï¼** ğŸš€

